[Bedrock?]
AWS Bedrock은 사용자가 직접 모델을 구축하거나 서버를 띄우는 서비스가 아니라, AWS가 관리하는 LLM 모델들을 API 형태로 제공하는 서비스이다. (생성형 AI)

1. 사용할 모델(Claude, Nova 등) 액세스 권한이 부여
2. Bedrock이 제공되는 region에서 활성화

위 두 조건을 만족하면 바로 bedrock API를 활용할 수 있게된다.

아래 공식 문서를 참고해서 코드를 작성한다.
https://docs.aws.amazon.com/bedrock/latest/userguide/bedrock-runtime_example_bedrock-runtime_InvokeModel_AnthropicClaude_section.html

python으로 다음과 같이
Lambda에서 boto3로 bedrock-runtime 클라이언트를 호출해서 원하는 결과를 전달받을 수 있게된다.

bedrock_client = boto3.client("bedrock-runtime", region_name="ap-northeast-2") 
response = bedrock_client.invoke_model( modelId="anthropic.claude-3-5-sonnet-20240620-v1:0", contentType="application/json", accept="application/json", body=json.dumps(bedrock_payload) )

---
[Architecture]
EKS 컨테이너 로그 -> Fluentbit -> S3 -> Lambda -> 메신저
Fluentbit: 로그 수집기
Lambda: 1. 로그 + 프롬프트로 bedrock API를 활용한 응답값 추출 2. 응답값 메신저에 전송

