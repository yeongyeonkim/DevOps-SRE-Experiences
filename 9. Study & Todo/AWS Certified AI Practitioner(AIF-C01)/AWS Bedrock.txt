======================= Fine-Tuning =======================
파인튜닝(Fine-tuning)
 - 기존 Foundation Model을 복사한 뒤, 거기에 자신의 데이터를 추가 학습시켜 특화 모델을 만드는 과정
 - 학습 데이터는 특정 포맷을 따라야 하며, Amazon S3에 저장되어야 한다.
 - 파인튜닝된 모델을 사용하려면 Provisioned Throughput 요금제를 사용해야 합니다.(On-demand보다 비싸다)
 - 모델의 내부 가중치(weight)가 실제로 변경됩니다.

* 가중치(weight)란?
 - 입력덴 데이터가 얼마나 중요한지를 모델이 판단할 때 사용하는 비율
   e.g., "비 오는 날에는 사람들이 우산을 쓴다" 날씨=비, 1.2(매우 중요) / 시간=밤, 0.1(영향 없음) 등
   비가 오면 우산 쓸 확률이 높다는 패턴을 찾아내며 날씨=비에 대한 가중치를 점점 크게 조정한다.

파인튜닝의 유형
1. Instruction-based Fine-tuning (지시 기반 파인튜닝)
 - 라벨이 있는 데이터 필요 (입력 + 출력)
 - Prompt-Response 쌍으로 구성된다.
 - 목적: 모델이 특정 명령 수행 방식이나 응답 톤을 학습하도록 조정한다.
   (e.g., 고객 응대 톤으로 대답하게 만들기, 특정 포맷으로 답변하게 만들기)
 - 비용이 적고, 데이터도 적게 필요하다.

2. Continued Pre-training (지속적 사전 학습)
 - 라벨 없는 데이터 사용 (입력)
 - 모델을 특정 도메인(금융, 의료 등)에 특화 시킨다.
   (e.g., AWS 문서를 모두 학습시켜 AWS 전문가 모델로 만든다.)
 - 대용량 데이터 필요 -> 비용 높음, ML 엔지니어의 전문성 필요

======================= FM Evaluation  =======================
Bedrock에는 생성된 모델의 출력 품질을 평가하기 위해 두 가지 방식을 제공한다.

1. Automatic Evalutation
 - 평가자: 시스템 or모델 / 비용: 저렴 / 지표: 수치화 가능한 Metrics
 - 모델이 모델을 평가 -> Model as a Judge
2. Human Evalutation
 - 평가자: 사람 / 비용: 인력->비용 상승 / 지표: 품질, 톤, 자연스러움 등 정성적 평가


======================= RAG & Knowledge Base  =======================
RAG (Retrieval-Augmented Generation): 파운데이션 모델이 자체 학습 데이터 외부의 최신 정보를 검색해 활용하는 기법
 - Fine-tuning 없이 외부 지식을 검색 + 답변에 반영

RAG 작동 원리
 1. 데이터 준비
   - 원본 문서, PDF, 파일 등을 S3 등 데이터 소스에 저장
 2. Knowledge Base 생성 (모델이 참조할 외부 데이터 저장소)
   - Bedrock이 자동으로 데이터를 나누고(chunking) 임베딩 모델을 통해 벡터로 변환
   - 변환된 벡터는 Vector DB에 저장됨
 3. Query 요청 시
   - 사용자가 질문을 하면 Bedrock이 Vector DB에서 의미적으로 유사한 문서를 검색(Retrieval)
 4. Augmented Prompt 생성
   - 검색된 문서 내용을 질문에 덧붙여(prompt augmentation) 파운데이션 모델로 전달
 5. 모델 응답 생성
   - 모델을 해당 외부 정보를 참조하여 정확하고 최신의 답변을 생성 (Generation)

RAG 구성요소
 - Data Source: Amazon S3, Confluence, SharePoint
 - Knowledge Base: Bedrock이 자동으로 관리하는 데이터 검색 저장소
 - Vector Database: 의미 검색(semantic search)을 위한 벡터 저장소 (OpenSearch, Neptune)
 - Embedding Model: 텍스트를 의미를 보존한 벡터 형태로 변환 (Amazon Titan)
  (https://aws.amazon.com/ko/blogs/korea/amazon-titan-text-v2-now-available-in-amazon-bedrock-optimized-for-improving-rag/)
 - Foundation Model: 최종 답변을 생성하는 모델 (Claude, Nova 등)

RAG 장점
 - Fine-tuning 없이 최신 데이터 반영 가능


=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================
=======================   =======================