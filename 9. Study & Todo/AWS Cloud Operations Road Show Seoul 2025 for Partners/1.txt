

Cloud Ops가 AWS를 고객들이 선택하게하는 이유가 될 것이다.

1. AI ML
2. Migration + 모더나이제이션 (Observability, Governance + Platform engineer)

내년을 겨냥한 행사다.

======================= 10:00 ~ =======================
1. 어떤 멘탈 모델을 사용하는지 (Observability에 대한 내용)
2. Observability를 개선하기 위해 사용할 수 있는 툴

위 두개를 말씀드리곘다.

서버리스, 분산 시스템들이 나오면서 이런 시스템들에 대한 Observability를 높이는게 어려워졌다.

1. AWS Observability Maturity Model (멘탈 모델)

세로는 성숙도 ㄴ
           가로는 역량

1. Foundational monitoring 텔레메트리(trace, log)를 가져오는 단계
 - 고객 데이터가 분산 되어있는 경우, 데이터 수집하는 방법이 다 다를 것이다.
   이를 통합되게 한눈에 보는 것이 어렵다. 또한, debug하는 것도 어려워지고 가시성이 떨어진다.
 - 현재 상황을 이해하고
 - 1.모니터링 애플리케이션 텔레메트리 시그널 수집 분석
 - 2.대시보드를 만드렁서 문제가 어디서 일어났는지 확인한다.
 - 3.우리가 어떤 kpi를 따르고 지표를 따라야하는지  
 
2. Intermediate monitoring 분석하는 단계
 - 텔레메트리 데이터를 분석하고 insight를 얻는 것(사후 방지와 같은)
  - 기업들 kpi, 알람, 로그가 너무많아(데이터 방대함) -> 때문에 troubleshooting이 어려움
  - 어떤 시그널을 어떻게 생성하는지 파악해야한다.
  - 중요한 KPI를 세워야한다.(이에 따라 로그와 메트릭을 수집해야한다)
  - 알람이 많으면 load가 생긴다. 때문에 그룹핑을 해야한다.

3. Advanced Observability비이상적인 패턴은 없는지 분석한다(Anomaly detection)
 - 선제적이지 않고 반응적인 단계
 - 자동화가 없어 수동적인 업무가 많이 필요하다(즉, 사람 전문가가 필요)
 - 1. AI/ML 툴을 사용해서 어느정도 자동화를 수행하라.
 - 2. ServiceNow나 Jira를 사용하면 그것을 하나를 통합해라
   (써비스 관리 툴과 Observability 툴을 통합하라)
   + AIOPS를 통합하라(오후 세션)
 
4. Proactive Observability 새로 등장한 단계로 AI를 통해 프로세스를 만든다. 선제적으로 모니터링을 하겠다
 - 3단계의 수동적인 부분을 해결하는 부분으로 자동화 단계이다.
 - 1. 모니터링 대시보드를 사용한다. (문제가 생기는 것만 명확하게 보여줘야 한다.)
     - 문제가 생기는 것은 문제를 관리하기 위한 좋은 기회임

---------------------------
2. Maturity Accessment
accelerate.amazonaws.com

partnercentral에 accessment Tool이 있다.
 - Observability검색하면 성숙도 모델 분석을 활용한다.
 
-> 한 번 들어가봐야할듯 ☆

Log, Metric, Trace 등에 대한 회사 상황을 말해서(Recommendation을 활용할 수도 있음)
그러면 이제 PPT나 문서로 정리해준다.

이를 통해 고객과 AWS가 장기적으로 개선해나갈 수 있는 방향성이 만들어짐

======================= 10:40 ~ =======================
Application Performance Monitoring

Cloudwatch를 사용해서 한 곳에서 모든 Layer에 대한 커버가 가능하다.

애플리케이션 퍼포먼스 모니터링할 떄 가장 주요한 지표
1. 요청 (Volume of request)
2. 지연시간 latency
3. 문제 fault
4. 에러 error

Cloudwatch는 span 그 요청에 대한 정보를 다 수집한다.
애플리케이션이 받는 모든 시그널, 이벤트 모두.

Application Signal 
1. AWS Distro for OpenTelemetry(ADOT, 오픈소스를 사용해서 데이터를 수집하는 단계)
 SDK 등 솔루션을 이미 사용하고 있더라고 이걸 Distro로 사용하면 됨
↓
2. CloudWatch Agent (Standalone도 가능하고 EKS에 붙일수도 있음)  
↓
3. CloudWatch + X-Ray
↓
4. CloudWatch Application Signals

X-Ray의 비용과 제한에 대한 아쉬움을 Opentelemetry + CloudWatch로 해결할수 있게 되었다.

ECS 데모 보여주는 중~
컨테이너를 세개를 사용해서
자동계측을 위한 init container 하나와
 (public.ecr/com/aws-observability/adot-autoinstrumentation-python:v0.12.1)
cloudwatch-agent container 하나와
그리고 애플리케이션 컨테이너 하나로 구성한다.

Lambda에 Monitoring tool 설정이 있음 + FeedbackReceiver 확인
람다에서 instrumentatino layer가 추가가 된 것


[EKS]
CloudWatch Observability 애드온을 설치하면 됨. 더 쉽다.

cloudwatch-agent를 DS로 배포한다.(데이터를 수집함)

이후 CloudWatch > Service에 보면
EKS, Lambda, Bedrock, ECS 등에 대한 다양한 layer들에 대한 확인이 가능 (SLI 달성에 대한)

Audit이 있어서 그를 기록하고 어떻게 조치하는지도 볼 수 있음

CloudWatch > Application Map (지난 달에 출시됨)
 - 여러 애플리케이션 중 꼭 봐야하는 애플리케이션들에 대해서만 그룹핑을 해서 한 눈에 볼 수 있도록 함
 (tempo, jaeger 맵 같은 모양이네)


====== 11:20~11:30 ===== 10분 짧게
1. Centralization
 - 여러 리전으로 나뉜 Account가 있을 때
 - CloudWatch seeting을 통해 Organization 탭에 Centralization rules을 생성해서 가능하다.
   Source: 수집한 리전들을 설정하고
   Destination: 하나 리전 혹은 백업 리전 설정 가능
   KMS으로 Central region에 encrypt도 가능
 
 위와 같이 하게 되면 @aws.account, @aws.region과 같은 스탬프가 생겨 Log Insights에서 검색할 수 있게 됨
 
 Query generator(AI)를 활용해서 Query 생성이 가능함.!
 
2. Field index
 - DB Index와 같은 것
 - 로그 내용이 많아서 이를 다 검색하려하면 비용이 들어서 인듯
 - Log groups에 Log group field indexes 항목을 관리하면  
   인덱스를 활용하여 데이터를 빠르게 활용 가능하다. (로그 그룹 당 20개 무료)

3. Transformation
 - 로그 형태를 바꿈 (Grok 등 원하는 패턴으로)

아래 두 개는 AI
4. Query Generator
5. Log Summarizer

















